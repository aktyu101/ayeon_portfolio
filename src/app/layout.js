"use client";

import React, { useEffect, useState } from "react";
import ConfigProvider from "./config-provider";
import "./globals.css";
import Navigation from "@/components/navigation";
import { notoSansKr } from "./font";
import BackToTopButton from "@/components/backToTopBtn";
import dynamic from "next/dynamic";

const CustomCursor = dynamic(() => import("@/components/AnimatedCursor"), {
  ssr: false,
});

export default function RootLayout({ children }) {
  const [isClient, setIsClient] = useState(false);

  useEffect(() => {
    setIsClient(true);

    // Google Analytics 스크립트 추가
    const script = document.createElement("script");
    script.src = "https://www.googletagmanager.com/gtag/js?id=G-HYQL7X9R8N";
    script.async = true;
    document.head.appendChild(script);

    script.onload = () => {
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        window.dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-HYQL7X9R8N");
    };

    return () => {
      document.head.removeChild(script);
    };
  }, []);

  return (
    <html lang="ko">
      <body className={notoSansKr.className}>
        {isClient && <CustomCursor />}
        <ConfigProvider>
          {children}
          <BackToTopButton />
        </ConfigProvider>
      </body>
    </html>
  );
}

// "use client";

// import React, { useEffect, useState } from "react";
// import ConfigProvider from "./config-provider";
// import "./globals.css";
// import Navigation from "@/components/navigation";
// import { notoSansKr } from "./font";
// import BackToTopButton from "@/components/backToTopBtn";
// import dynamic from "next/dynamic";

// const CustomCursor = dynamic(() => import("@/components/AnimatedCursor"), {
//   ssr: false,
// });

// // export const metadata = {
// //   title: "Create Next App",
// //   description: "Generated by create next app",
// // };

// export default function RootLayout({ children }) {
//   const [isClient, setIsClient] = useState(false);

//   useEffect(() => {
//     setIsClient(true);
//   }, []);

//   return (
//     <html lang="ko">
//       <!-- Google tag (gtag.js) -->
// <script async src="https://www.googletagmanager.com/gtag/js?id=G-HYQL7X9R8N"></script>
// <script>
//   window.dataLayer = window.dataLayer || [];
//   function gtag(){dataLayer.push(arguments);}
//   gtag('js', new Date());

//   gtag('config', 'G-HYQL7X9R8N');
// </script>
//       <body className={notoSansKr.className}>
//         {isClient && <CustomCursor />}
//         <ConfigProvider>
//           {children}
//           <BackToTopButton />
//         </ConfigProvider>
//       </body>
//     </html>
//   );
// }
